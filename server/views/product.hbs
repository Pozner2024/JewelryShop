<!-- Breadcrumbs -->
  <section class="breadcrumbs">
    <div class="breadcrumbs__container">
      <nav class="breadcrumbs__nav">
        <a href="/" class="breadcrumbs__link">Home</a>
        <span class="breadcrumbs__separator">/</span>
        <a href="/catalog" class="breadcrumbs__link">Catalog</a>
        <span class="breadcrumbs__separator">/</span>
        <a href="/catalog/{{product.category}}" class="breadcrumbs__link">{{product.categoryName}}</a>
        <span class="breadcrumbs__separator">/</span>
        <span class="breadcrumbs__current">{{product.name}}</span>
      </nav>
    </div>
  </section>

  <!-- Product Details -->
  <section class="product">
    <div class="product__container">
      <div class="product__content">
        <!-- Product Gallery -->
        <div class="product__gallery">
          <div class="product-gallery">
            <div class="product-gallery__main">
              <img
                src="/images/{{product.mainImage}}"
                alt="{{product.name}}"
                class="product-gallery__main-img"
                id="mainProductImage"
              />
              <button class="product-gallery__wishlist">
                <img
                  src="/images/heart-icon.svg"
                  alt="Add to Wishlist"
                  class="product-gallery__heart"
                />
              </button>
              {{#if product.badge}}
              <div class="product-gallery__badges">
                <span class="badge badge--{{product.badgeType}}">{{product.badge}}</span>
              </div>
              {{/if}}
            </div>
            <div class="product-gallery__thumbs">
              {{#each product.images}}
              <button class="product-gallery__thumb {{#if @first}}product-gallery__thumb--active{{/if}}">
                <img
                  src="/images/{{this}}"
                  alt="{{../product.name}} - view {{inc @index}}"
                  class="product-gallery__thumb-img"
                />
              </button>
              {{/each}}
            </div>
          </div>
        </div>

        <!-- Product Info -->
        <div class="product__info">
          <div class="product-info">
            <div class="product-info__header">
              <h1 class="product-info__title">{{product.name}}</h1>
              <div class="product-info__meta">
                <span class="product-info__brand">{{product.brand}}</span>
                <span class="product-info__article">Art. {{product.article}}</span>
              </div>
            </div>

            <div class="product-info__rating">
              <div class="rating">
                {{#times product.rating}}
                <span class="rating__star rating__star--filled">★</span>
                {{/times}}
                {{#times (minus 5 product.rating)}}
                <span class="rating__star">★</span>
                {{/times}}
              </div>
              <span class="rating__count">({{product.reviewsCount}} reviews)</span>
            </div>

            <div class="product-info__price">
              <div class="price">
                <span class="price__current">{{product.price}} ₽</span>
                {{#if product.oldPrice}}
                <span class="price__old">{{product.oldPrice}} ₽</span>
                {{/if}}
              </div>
            </div>

            <div class="product-info__description">
              <p class="product-info__desc">{{product.description}}</p>
            </div>

            <div class="product-info__options">
              <div class="product-options">
                {{#if product.sizes}}
                <div class="product-options__group">
                  <label class="product-options__label">{{product.sizeLabel}}:</label>
                  <div class="product-options__sizes">
                    {{#each product.sizes}}
                    <button class="size-btn {{#if selected}}size-btn--active{{/if}}" data-size="{{value}}">{{value}}</button>
                    {{/each}}
                  </div>
                </div>
                {{/if}}

                <div class="product-options__group">
                  <label class="product-options__label">Quantity:</label>
                  <div class="quantity">
                    <button class="quantity__btn quantity__btn--minus">-</button>
                    <input
                      type="number"
                      class="quantity__input"
                      value="1"
                      min="1"
                      max="5"
                    />
                    <button class="quantity__btn quantity__btn--plus">+</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="product-info__actions">
              <button class="product-info__btn-cart button button--primary" data-product-id="{{product.id}}">
                Add to Cart
              </button>
              <button class="product-info__btn-buy button button--secondary">
                Buy in 1 Click
              </button>
            </div>

            <div class="product-info__features">
              <div class="product-features">
                <h3 class="product-features__title">Specifications</h3>
                <ul class="product-features__list">
                  {{#each product.specifications}}
                  <li class="product-features__item">
                    <span class="product-features__name">{{name}}:</span>
                    <span class="product-features__value">{{value}}</span>
                  </li>
                  {{/each}}
                </ul>
              </div>
            </div>

            <div class="product-info__services">
              <div class="product-services">
                {{#each services}}
                <div class="product-services__item">
                  <div class="product-services__icon">{{icon}}</div>
                  <div class="product-services__content">
                    <div class="product-services__title">{{title}}</div>
                    <div class="product-services__desc">{{description}}</div>
                  </div>
                </div>
                {{/each}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  {{#if relatedProducts}}
  <!-- Related Products -->
  <section class="related-products">
    <div class="related-products__container">
      <h2 class="related-products__title">Similar Products</h2>
      <div class="related-products__grid">
        {{#each relatedProducts}}
        <div class="product-card">
          <div class="product-card__image">
            <img
              src="/images/{{image}}"
              alt="{{name}}"
              class="product-card__img"
            />
            <button class="product-card__wishlist">
              <img
                src="/images/heart-icon.svg"
                alt="Add to Wishlist"
                class="product-card__heart"
              />
            </button>
          </div>
          <div class="product-card__content">
            <h3 class="product-card__title">{{name}}</h3>
            <div class="product-card__meta">
              <span class="product-card__brand">{{brand}}</span>
              <span class="product-card__article">Art. {{article}}</span>
            </div>
            <div class="product-card__price-block">
              <p class="product-card__price">{{price}} ₽</p>
            </div>
            <div class="product-card__rating">
              <div class="rating">
                {{#times rating}}
                <span class="rating__star rating__star--filled">★</span>
                {{/times}}
                {{#times (minus 5 rating)}}
                <span class="rating__star">★</span>
                {{/times}}
              </div>
              <span class="rating__count">({{reviewsCount}} reviews)</span>
            </div>
            <div class="product-card__actions">
              <button class="product-card__btn-cart" data-product-id="{{id}}">
                Add to Cart
              </button>
              <a href="/product/{{slug}}" class="product-card__btn-view">View</a>
            </div>
          </div>
        </div>
        {{/each}}
      </div>
    </div>
  </section>
  {{/if}} 